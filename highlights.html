<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Highlights Gallery – Hansen Space</title>
    <link rel="stylesheet" href="/styles.css" />
    <style>
        .gallery-grid { display: flex; flex-direction: column; gap: 20px; }
        .grid-item { width: 100%; display: flex; justify-content: center; align-items: center; background-color: #000; border-radius: 8px; overflow: hidden; cursor: pointer; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .grid-item:hover { transform: scale(1.01); box-shadow: 0 4px 20px rgba(0,0,0,0.4); }
        .grid-item img { width: auto; height: auto; max-width: 100%; max-height: 85vh; display: block; }
    </style>
</head>
<body>
    <header><div class="header-inner-container content-limiter"><a class="brand" href="/index.html"><img src="/images/logo.png" alt="Hansen Space Logo"></a><nav><ul><li><a href="/index.html">Home</a></li><li><a href="/myjourney.html">My Journey</a></li><li><a href="/photography.html" class="active">Photography</a></li><li><a href="/articles">Articles</a></li><li><a href="/tools.html">Tools</a></li><li><a href="/contact.html">Contact</a></li></ul></nav><div class="menu-icon" onclick="toggleModal()">☰</div></div></header>
    <div class="modal-backdrop" id="modal-backdrop"></div><div class="modal" id="modal"><a href="/index.html">Home</a><a href="/myjourney.html">My Journey</a><a href="/photography.html" class="active">Photography</a><a href="/articles">Articles</a><a href="/tools.html">Tools</a><a href="/contact.html">Contact</a></div>
    <main class="page-main-content-area content-limiter">
        <div class="intro-block"><h1 class="intro-block__title">HIGHLIGHTS GALLERY</h1><p class="intro-block__text">A curated collection of my favorite astrophotography images.</p></div>
        <div class="gallery-wrapper"><div class="gallery-grid" id="gallery-grid"><p>Loading gallery...</p></div></div>
    </main>
    <div id="gallery-modal"><div class="gallery-modal-content"><div class="gallery-modal-header"><div class="gallery-modal-title" id="modal-title"></div><span class="gallery-modal-close" id="modal-close-button">×</span></div><div class="gallery-modal-body" id="modal-body"></div></div></div>
    <footer><div class="footer-inner-container content-limiter"><div class="social-links"><a href="https://www.youtube.com/hansenspace" target="_blank"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/youtube.svg" alt="YouTube"></a><a href="https://instagram.com/hansenspace" target="_blank"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/instagram.svg" alt="Instagram"></a><a href="https://tiktok.com/@hansen_space" target="_blank"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/tiktok.svg" alt="TikTok"></a></div><p>© <span id="year">2025</span> Hansen Space.</p></div></footer>
    
    <script src="/scripts.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', async () => {
        const grid = document.getElementById('gallery-grid');
        try {
            const v = Date.now();
            const [galleriesRes, imagesRes] = await Promise.all([ fetch(`/photos/data/galleries.json?v=${v}`), fetch(`/photos/data/all_images.json?v=${v}`) ]);
            if (!galleriesRes.ok || !imagesRes.ok) throw new Error('Failed to load gallery data.');
            const galleriesMap = await galleriesRes.json();
            const allImages = await imagesRes.json();
            const highlightsId = galleriesMap['Highlights'];
            if (typeof highlightsId === 'undefined') throw new Error('"Highlights" gallery not found.');
            const highlightImages = allImages.filter(img => img.gallery_ids.includes(highlightsId));
            
            grid.innerHTML = '';
            if (!highlightImages.length) {
                grid.innerHTML = '<p>No highlights have been added yet.</p>';
                return;
            }

            highlightImages.forEach(item => {
                const div = document.createElement('div');
                div.className = 'grid-item';
                div.addEventListener('click', () => {
                    const modalData = {
                        label: item.label,
                        fullImageSrc: `/${item.image_file}`,
                        originalWidth: item.width,
                        originalHeight: item.height,
                        details: item.data,
                        subjects: item.subjects
                    };
                    openModal(modalData);
                });
                const img = document.createElement('img');
                img.src = `/${item.image_file}`;
                img.alt = item.label;
                img.loading = 'lazy';
                div.appendChild(img);
                grid.appendChild(div);
            });
        } catch (e) {
            console.error('Error loading Highlights gallery:', e);
            grid.innerHTML = '<p>Error loading gallery data. Please try again later.</p>';
        }
    });
    </script>
</body>
</html>