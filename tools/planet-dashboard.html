<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Planets Dashboard – Hansen Space</title>

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&family=Nunito+Sans&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="/styles.css">

  <style>
  :root {
    --canvas:1200px;    /* grey strip max width */
    --side-pad:80px;    /* gutters */
    --grey:#2e2e2e;     /* strip bg */
    --cell:200px;       /* size grid cell */
    --gap:50px;         /* grid gap */
    --dist-aspect:1000/256; /* native distance chart ratio */
  }
  * { box-sizing:border-box; margin:0 }
  body {
    font-family:'Nunito Sans',sans-serif;
    background:#fff; color:#eee;
    overflow-x:hidden;
  }
  a { color:inherit; text-decoration:none }

  /* ----- header ----- */
  header {
    display:flex; justify-content:space-between; align-items:center;
    padding:18px var(--side-pad); background:#fff; color:#111;
  }
  header nav ul {
    display:flex; gap:30px; list-style:none;
    font-weight:600; font-size:16px;
  }
  header .active { border-bottom:2px solid #111; padding-bottom:3px }
  .menu-icon { display:none; font-size:1.4rem }
  @media(max-width:850px) {
    header nav { display:none }
    .menu-icon { display:block; cursor:pointer }
  }

  /* ----- grey strip ----- */
  #content { background:var(--grey); padding:0 var(--side-pad) }
  #inner   { max-width:var(--canvas); margin:0 auto; padding:30px 0 }

  /* intro */
  .intro-section {
    display:flex; justify-content:space-between; align-items:center;
    gap:40px; margin-bottom:60px;
  }
  .intro-title { font:700 40px/1 'Poppins'; color:#fff }
  .intro-text {
    max-width:640px; font-size:18px; line-height:1.6; color:#d0d0d0;
  }
  @media(max-width:850px) {
    .intro-section { flex-direction:column; text-align:center }
    .intro-title   { font-size:30px }
    .intro-text    { font-size:15px }
  }

  /* shared */
  .dash-block  { margin-bottom:70px }
  .block-title { font:600 28px/1 'Poppins'; margin-bottom:24px; color:#fff }
  .pill-switch {
    display:flex; background:#555; border-radius:40px;
    overflow:hidden; width:max-content; margin:0 auto 40px;
    font-size:14px;
  }
  .pill-switch button {
    padding:10px 18px; border:none; background:transparent;
    color:#eee; font-weight:600; cursor:pointer;
  }
  .pill-switch button.active {
    background:#fff; color:#000;
  }

  /* panels */
  .panel {
    background:#000; border-radius:6px;
    padding:48px 20px; margin-bottom:50px;
  }

  /* SIZE grid */
  #size-grid {
    display:grid;
    grid-template-columns:repeat(auto-fit,minmax(var(--cell),1fr));
    grid-auto-rows:var(--cell);
    gap:var(--gap);
    justify-content:center;
  }
  .planet-slot {
    position:relative; display:flex;
    justify-content:center; align-items:center;
  }
  .size-label {
    position:absolute; bottom:-26px; left:50%;
    transform:translateX(-50%);
    font-size:14px; color:#eee; white-space:nowrap;
  }

  /* DISTANCE */
  .panel-distance { padding-top:48px; padding-bottom:48px }
  #dist-box {
    width:80%; max-width:var(--canvas);
    margin:0 auto;
    aspect-ratio: var(--dist-aspect);
    position:relative;
  }
  .dist-track {
    position:absolute; top:0; left:0;
    width:100%; height:100%;
  }
  .dist-track::before {
    content:""; position:absolute; top:50%; left:0;
    width:100%; height:2px; background:#666;
    transform:translateY(-50%);
  }
  .anchor {
    position:absolute; left:0; top:50%;
    transform:translate(-50%,-50%);
  }
  #dist-planets img {
    position:absolute; top:50%;
    transform:translate(-50%,-50%);
  }
  .dist-label {
    position:absolute;
    top:calc(50% - 40px);
    color:#ddd;
    white-space:nowrap;
    transform-origin:top left;
    transform:rotate(-40deg);
    font-size: clamp(10px, 1.2vw, 14px);
  }

  /* divider */
  .div { height:1px; background:#555; margin:50px 0 }

  /* footer */
  footer {
    padding:20px var(--side-pad);
    background:#fff; text-align:center;
    font-size:14px; color:#999;
  }
  footer .social-links { margin-bottom:12px }
  footer .social-links img {
    height:24px; margin:0 10px;
  }

  /* mobile tweaks */
  @media(max-width:850px) {
    :root { --side-pad:20px }
    body { font-size:90% }
    .size-label,.dist-label { font-size:12px }
    header nav ul { font-size:14px }
    :root {
      --cell:  calc(200px*0.7);
      --gap:   calc(50px *0.7);
    }
  }
  </style>
</head>
<body>

  <header>
    <a class="brand" href="/"><img src="/images/logo.png" alt="Hansen Space"></a>
    <nav><ul>
      <li><a href="/">Home</a></li>
      <li><a href="/myjourney.html">My Journey</a></li>
      <li><a href="/photography.html">Photography</a></li>
      <li><a href="/articles">Articles</a></li>
      <li><a href="/tools.html" class="active">Tools</a></li>
      <li><a href="/contact.html">Contact</a></li>
    </ul></nav>
    <div class="menu-icon" onclick="toggleModal()">☰</div>
  </header>

  <div id="content">
    <div id="inner">

      <div class="intro-section">
        <h2 class="intro-title">PLANET DASHBOARD</h2>
        <p class="intro-text">A planetary dashboard for all of your needs.</p>
      </div>

      <!-- SIZE (unchanged) -->
      <section class="dash-block">
        <h3 class="block-title">SIZE</h3>
        <div class="pill-switch" id="size-mode">
          <button data-mode="true">true size</button>
          <button data-mode="apparent-earth" class="active">apparent size (Earth)</button>
          <button data-mode="apparent-sun">apparent size (Sun)</button>
        </div>
        <div class="panel">
          <div id="size-grid"></div>
        </div>
      </section>

      <!-- DISTANCE (fixed Sun mode) -->
      <section class="dash-block">
        <h3 class="block-title">DISTANCE</h3>
        <div class="pill-switch" id="dist-mode">
          <button data-mode="sun">from Sun</button>
          <button data-mode="earth" class="active">from Earth</button>
          <button disabled>placeholder</button>
        </div>
        <div class="panel panel-distance">
          <div id="dist-box">
            <div class="dist-track">
              <img id="dist-anchor" class="anchor" src="planets/earth.png" alt="anchor">
              <div id="dist-planets"></div>
            </div>
          </div>
        </div>
      </section>

      <div class="div"></div>

      <section class="dash-block">
        <h3 class="block-title">IN THE SKY (coming soon)</h3>
        <p style="color:#ccc">Feature under construction.</p>
      </section>

    </div>
  </div>

  <footer>
    <div class="social-links">
      <a href="https://www.youtube.com/hansenspace"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/youtube.svg" alt="YouTube"></a>
      <a href="https://instagram.com/hansenspace"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/instagram.svg" alt="Instagram"></a>
      <a href="https://tiktok.com/@hansen_space"><img src="https://cdn.jsdelivr.net/gh/simple-icons/simple-icons/icons/tiktok.svg" alt="TikTok"></a>
    </div>
    <p>&copy; 2025 Hansen Space.</p>
  </footer>

  <script>
  // Data & SIZE code unchanged
  const META={mercury:4879,venus:12104,earth:12756,mars:6779,jupiter:139820,
              saturn:116460,uranus:50724,neptune:49244};
  const SMA ={mercury:.387,venus:.723,earth:1,mars:1.524,
              jupiter:5.203,saturn:9.537,uranus:19.191,neptune:30.068};
  const RF  ={saturn:1206/2737};
  const ORDER=["mercury","venus","mars","jupiter","saturn","uranus","neptune","earth"];
  const DATA=Object.fromEntries(ORDER.map(p=>[p,{d:META[p],sun:SMA[p],earth:Math.abs(SMA[p]-1)||.3}]));
  const AU  =149597870.7;
  let sizeMode="apparent-earth", distMode="earth";

  // Build SIZE grid
  const grid=document.getElementById('size-grid');
  ORDER.forEach(p=>{
    let slot=document.createElement('div');
    slot.className='planet-slot'; slot.id=`slot-${p}`;
    slot.innerHTML=`<div id="lbl-${p}" class="size-label"></div>`;
    grid.append(slot);
  });

  function arc(p,m){
    let r=DATA[p].d/2,dist=AU*(m==='earth'?DATA[p].earth:DATA[p].sun);
    return 2*Math.atan(r/dist);
  }

  function drawSize(){
    let peakArc=Math.max(...ORDER.map(p=>Math.max(arc(p,'earth'),arc(p,'sun')))),
        maxDisc=200*0.78;
    if(window.innerWidth<850) maxDisc*=0.7;
    ORDER.forEach(p=>{
      let slot=document.getElementById(`slot-${p}`),
          lbl =document.getElementById(`lbl-${p}`);
      if(p==='earth'&&sizeMode==='apparent-earth'){
        slot.style.visibility='hidden'; lbl.textContent=''; return;
      }
      slot.style.visibility='visible';
      let metric = sizeMode==='true'?DATA[p].d:arc(p,(sizeMode==='apparent-earth'?'earth':'sun')),
          ref    = sizeMode==='true'
                   ?Math.max(...ORDER.map(q=>DATA[q].d))
                   :peakArc,
          px     = Math.max(4,metric/ref*maxDisc);
      slot.innerHTML= `<img src="planets/${p}.png" alt="${p}"
        style="${p==='saturn'?'height:'+px+'px;width:auto':'width:'+px+'px;height:'+px+'px'}">`;
      slot.append(lbl);
      lbl.textContent = sizeMode==='true'
        ?`${(DATA[p].d/2).toLocaleString()} km`
        :`${(metric*206264.806).toFixed(1)}″`;
    });
  }

  // DRAW DISTANCE with null‑check
  function drawDist(){
    let anchor = document.getElementById('dist-anchor');
    if(anchor){
      anchor.src = (distMode==='sun' ? 'planets/sun.png' : 'planets/earth.png');
      // size as percentage of container height:
      anchor.style.height = (distMode==='sun' ? '43.75%' : '15.625%');
    }

    let set   = distMode==='sun' ? ORDER : ORDER.filter(p=>p!=='earth'),
        maxAU = Math.max(...set.map(p=>distMode==='sun'?DATA[p].sun:DATA[p].earth)),
        track = document.getElementById('dist-planets');

    track.innerHTML='';
    set.forEach((p,i)=>{
      let au   = distMode==='sun'?DATA[p].sun:DATA[p].earth,
          pct  = au/maxAU*100,
          frac = (DATA[p].d/META.jupiter) *
                 (p==='saturn'?RF.saturn:1) * 43.75,
          nudge= (i<4 && distMode==='sun')?-20:0;

      track.insertAdjacentHTML('beforeend',
        `<img src="planets/${p}.png"
           style="position:absolute;left:${pct}%;top:50%;
                  transform:translate(-50%,-50%);
                  height:${frac}%;width:auto;">`
      );
      track.insertAdjacentHTML('beforeend',
        `<div class="dist-label" style="left:calc(${pct}% + ${nudge}px)">
          ${au.toFixed(3)} AU
         </div>`
      );
    });
  }

  // Button handlers
  document.querySelectorAll('#size-mode button').forEach(b=>{
    b.onclick=()=>{
      if(b.classList.contains('active')) return;
      sizeMode=b.dataset.mode;
      b.parentNode.querySelectorAll('button')
       .forEach(x=>x.classList.toggle('active',x===b));
      drawSize();
    };
  });
  document.querySelectorAll('#dist-mode button').forEach(b=>{
    b.onclick=()=>{
      if(b.classList.contains('active')) return;
      distMode=b.dataset.mode;
      b.parentNode.querySelectorAll('button')
       .forEach(x=>x.classList.toggle('active',x===b));
      drawDist();
    };
  });

  // initial
  drawSize();
  drawDist();
  window.addEventListener('resize',()=>{ drawSize(); drawDist(); });
  </script>
</body>
</html>
